<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="La liti&egrave;re livr&eacute;e chez vous.">
    <meta name="author" content="Kaka Liti&egrave;re">
    <meta name="keywords" content="kaka, kaka liti&egrave;re, kakalitiere, liti&egrave;re, liti&egrave;re domicile, liti&egrave;re livraison, kaka livraison, liti&egrave;re facile">
    <meta property="og:title" content="Kaka Liti&egrave;re - La liti&egrave;re livr&eacute;e chez vous">
    <meta property="og:site_name" content="Kaka Liti&egrave;re">
    <meta property="og:type" content="website">
    <meta property="og:image" content=" <!-- Add image link here --> ">
    <meta property="og:description" content="Kaka Liti&egrave;re, c'est la liti&egrave;re livr&eacute;e directement chez vous, sans effort.">
    <meta property="fb:admins" content="912496455461366">

    <title>Kaka Liti&egrave;re - La liti&egrave;re livr&eacute;e chez vous</title>

    <!-- jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="js/modal.js"></script>

    <!-- CSS -->
    <link href="css/modal.css" rel="stylesheet">
    <link href="css/form.css" rel="stylesheet">
    <link href="css/kaka.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
</head>
<body>
  <nav>
    <div class="container">
      <div class="nav-element left">
        <object type="image/svg+xml" data="assets/img/logo.svg" height="40px">Your browser does not support SVG</object>
      </div>
      <div class="nav-element right">
        <a href="#contact">Contact</a>
      </div>
    </div>
  </nav>
  <div class="main">
    <h1 class="center">La liti&egrave;re livr&eacute;e chez vous.</h1>
    <div class="main-filter">
      <div class="container">
        <div>
          <h2>Liti&egrave;re Kaka</h2>
        </div>
        <div class="table">
          <div class="desc">
            100% min&eacute;rale, en sac de 5kg. Chaque sac convient &agrave; 1 mois de liti&egrave;re.<br>
            Prix : 10 € / sac
          </div>
          <div class="select-qty">
            <form>
              <button class="button button-left" name="minus" id="qty-minus">-</button>
              <input type="text" name="value" id="qty-value" value="1">
              <button class="button button-right" name="plus" id="qty-plus">+</button>
              <button class="submit-main" data-toggle="modal" data-target="#myModal">Je commande</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="description-div">
    <div class="strip">
      <h2>On s'occupe de tout, vous payez &agrave; la livraison.</h2>
      <p>Nous livrons au lieu et &agrave; l’heure de votre choix, partout dans Paris et en banlieue. Finies les gal&egrave;res avec des sacs surcharg&eacute;s, fa&icirc;tes-vous livrer directement et &agrave; moindre co&ucirc;t.</p>
    </div>
    <div class="strip">
      <h2>Un produit de qualit&eacute; au prix le plus comp&eacute;titif.</h2>
      <p>Notre liti&egrave;re est 100% min&eacute;rale, sans additif, pour pr&eacute;server la sant&eacute; de vos chats ch&eacute;ris. Nous nous occupons nous-m&ecirc;mes de la livraison pour vous garantir un prix des plus comp&eacute;titifs, sans les emb&ecirc;tements habituels.</p>
    </div>
    <div class="strip">
      <h2>Comme commander une pizza.</h2>
      <p>Vous pouvez commander pour le jour-m&ecirc;me, et le paiement s'effectue en esp&egrave;ces &agrave; la livraison. Comme pour une pizza, mais pour votre chat. :)</p>
    </div>
  </div>
  <div class="strip-black center" id="contact">
    <p>KAKA LITI&Egrave;RE, PARIS - 01 45 78 32 14</p>
    <p>LITIEREKAKA@GMAIL.COM</p>
    <p><a href="legal.html">MENTIONS L&Eacute;GALES</a></p>
    <a href="https://www.facebook.com/kakalitiere/" target="_blank">
      <img src="assets/img/facebook.svg" height="40px">
    </a>
  </div>
  <!-- Modal de commade -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
      <!-- Modal contenu-->
      <div class="modal-content">
        <div class="modal-body" id="orderModal">
          <h2>O&ugrave; et quand souhaitez-vous &ecirc;tre livr&eacute;(e) ?</h2>
          <form id="checkout-form" class="form-modal center" action="https://docs.google.com/forms/d/1sGL92SNy3ZgXrrCC4_Frx5LohgCTin8ilPc6hA-R_iU/formResponse">
            <input type="text" class="form-control required" id="full-name" name="full-name" placeholder="Nom complet" />
            <input type="email" class="form-control required" id="email" name="email" placeholder="Email" />
            <input type="text" class="form-control required" id="address" name="address" placeholder="Adresse (rue, num&eacute;ro)" />
            <input type="text" class="form-control required" id="city" name="city" placeholder="Ville" />
            <input type="text" class="form-control" id="code-building" name="code-building" placeholder="Code de l'immeuble" />
            <input type="tel"  class="form-control required" id="phone-number" name="telephone" placeholder="T&eacute;l&eacute;phone" />
            <input type="date"  class="form-control required" id="delivery-date" name="delivery-date" placeholder="Date de livraison" />
          ​
            <div class="schedule">
              <button class="btn select-hour">10h - 12h</button>
              <button class="btn select-hour">12h - 14h</button>
              <button class="btn select-hour">14h - 16h</button>
              <button class="btn select-hour">16h - 18h</button>
              <button class="btn select-hour">18h - 22h</button>
            </div>

            <div class="select-qty-modal">
                <button class="button button-left" name="minus" id="qty-minus">-</button>
                <input type="text" name="value" id="modal-qty-value" value="1" />
                <button class="button button-right" name="plus" id="qty-plus">+</button>
            </div>

            <div class="modal-footer">
              <button type="button" id="cancel" class="btn-cancel" data-toggle="modal" data-target="#myModal">Annuler</button>
              <input type="submit" id="btn-confirm" class="btn-confirm" value="Confirmer" />
            </div>
            <div class="clear-both"></div>
          </form>
        </div>
        <div class="modal-body" id="confirmationModal">
          <h2 class="center">Super !</h2>
          <img src="assets/img/thankyou.jpg" width="70%">
          <h2 class="center">Vous allez recevoir un SMS de confirmation avant votre livraison.</h2>
          <h2 class="center">Merci de nous faire confiance pour la sant&eacute; de vos tyrans ador&eacute;s.</h2>
          <div class="modal-footer">
            <button type="button" class="btn-confirm" data-toggle="modal" data-target="#myModal">Je retourne c&acirc;liner mon chat.</button>
          </div>
          <div class="clear-both"></div>
        </div>
      </div>
    </div>
  </div>
</body>

<!-- Gestion des interactions users sur la page -->
<script>
  $(".button").on("click", function (e) {
    e.preventDefault();
    var button = $(this);
    if (button.attr('id') == 'qty-minus') {
      var temp = $("#qty-value").val();
      if (temp > 1) {
        temp = parseFloat(temp) - 1;
      } else {
        temp = 1;
      }
      $("#qty-value").val(temp);
    } else if (button.attr('id') == "qty-plus") {
      var temp = parseFloat($("#qty-value").val()) + 1;
      $("#qty-value").val(temp);
    }
  });

  $(".submit-main").on("click", function (e) {
    e.preventDefault();
  });

  // Gestion des classes sur les horaires
  $(".schedule button").on('click', function() {
    // Ajout de la class btn-active sur le bouton cliqu&eacute; et seulement celui-ci
    $(".select-hour").removeClass('btn-active');
    $(this).addClass('btn-active');
  });

  // Gestion de la transmission de la quantit&eacute; vers la modal
  $(".select-qty button.submit-main").on('click', function(){
    var qty = $(".select-qty input#qty-value").val();
    $(".modal-body .select-qty-modal input#modal-qty-value").val(qty);
  });

  // Gestion de l'ajout/soustraction de quantit&eacute; dans la modal
  $(".modal-body .button").on("click", function (e) {
    e.preventDefault();
    var button = $(this);
    if (button.attr('id') == 'qty-minus') {
      var temp = $("#modal-qty-value").val();
      if (temp > 1) {
        temp = parseFloat(temp) - 1;
      } else {
        temp = 1;
      }
      $("#modal-qty-value").val(temp);
    } else if (button.attr('id') == "qty-plus") {
      var temp = parseFloat($("#modal-qty-value").val()) + 1;
      $("#modal-qty-value").val(temp);
    }
  });

  // Afficher le modal-body de confirmation et cacher le form
  $(".btn-confirm").on("click", function() {
    if ($("#orderModal").css("display") == "none") {
      $("#orderModal").css("display", "block");
      $("#confirmationModal").css("display", "none");
    } else {
      $("#orderModal").css("display", "none");
      $("#confirmationModal").css("display", "inline");
    }
  });
</script>

<!-- Ajax request vers la Google Spreadsheet -->
<script data-cfasync="false" type="text/javascript">
jQuery( document ).ready(function( $ ) {
  var required = true;
  // variable to hold request
	var request;
	// bind to the submit event of our form
  $(".select-hour").on("click", function (e) {
    e.preventDefault();
  });
	$('.modal-footer input[type=submit]').on('click', function(event) {
		// abort any pending request
		if (request) {
			request.abort();
		}
		// setup some local variables
		var $form = $('#checkout-form');
		// let's select and cache all the fields
		var $inputs = $form.find("input, select, button, textarea");
		// serialize the data in the form
		var serializedData = $form.serialize();
    // => full-name=Nicolas+Filzi&email=nfilzi.webservices%40gmail.com&address=4+place+Charles+Fillion&city=Paris&code-building=&telephone=0678380989&delivery-date=2015-11-08
    var hour = $('.btn-active').html();
    var qty = $('#modal-qty-value').val();
    serializedData = serializedData + "&hour=" + hour + "&qty=" + qty;

		// let's disable the inputs for the duration of the ajax request
		// Note: we disable elements AFTER the form data has been serialized.
		// Disabled form elements will not be serialized.
		$inputs.prop("disabled", true);
		// fire off the request to /form.php
    $(".required").each(function() {
      if (!$(this).val()) required = false;
    });
    if (required) {
		request = $.ajax({
      url: "https://script.google.com/macros/s/AKfycbzbtKWG0bEV_CV6VaIeUlCX6sZKqEHDJ8bMcdJzvApU3WUdo8o/exec",  // clone
			type: "post",
			data: serializedData
		});
		// callback handler that will be called on success
		request.done(function (response, textStatus, jqXHR){
			// log a message to the console
      console.log(response, textStatus, jqXHR);
			$('#result').html('<a href="https://docs.google.com/spreadsheets/d/10tt64TiALYhPMqR2fh9JzkuhxW7oC0rXXPb_pmJ7HAY/edit?usp=sharing" target="_blank">Success - see Google Sheet</a>');
			console.log("Hooray, it worked!");
		});
		// callback handler that will be called on failure
		request.fail(function (jqXHR, textStatus, errorThrown){
			// log the error to the console
			console.error(
				"The following error occured: "+
				textStatus, errorThrown
			);
		});
		// callback handler that will be called regardless
		// if the request failed or succeeded
		request.always(function () {
			// reenable the inputs
			$inputs.prop("disabled", false);
		});
		// prevent default posting of form
		event.preventDefault();
    //$("#myModal").hide();
  }
	});
});
</script>
</html>
